kind: Module
type: exec
name: nixpacks
# TODO if this file and folder aren't specifically included, Garden won't source them. No wildcards.
include: ["pyproject.toml", "little_bits_of_buddha_worldofgeese"]
local: true
build:
  command:
    - nixpacks build . --name lbob -o .

---
kind: Module
type: container
exclude: ["little_bits_of_buddha_worldofgeese"]
name: lbob
build:
  dependencies:
    - name: nixpacks
      copy:
        # TODO if "."-prefix file isn't explicitly included, Garden won't source it. No wildcards.
        - source: .nixpacks
dockerfile: .nixpacks/Dockerfile
services:
  - name: lbob
tests:
  - name: unit
    args: [pytest]
